#!/usr/bin/env ruby

opts = ARGV.getopts('', 'host:localhost', 'mountpoint:__web_console', 'proto:http')
if ARGV.empty?
  puts 'web_console_auth [--host localhost] [--mount __web_console] [--proto http] <port>'
else
  auth_url = URI.join("#{opts['proto']}://#{opts['host']}:#{ARGV.first}", opts['mount'], 'auth/new')
  system "curl -X POST #{auth_url}"
end
